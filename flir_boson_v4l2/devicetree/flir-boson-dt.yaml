# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/media/i2c/flir,boson-mipi.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: FLIR Boson+ MIPI Thermal Camera

maintainers:
  - FLIR Driver Development <flir-driver@example.com>

description: |
  The FLIR Boson and Boson+ are thermal imaging cameras with MIPI CSI-2
  interface. This binding describes the device tree properties for these
  cameras when connected via I2C for control and MIPI CSI-2 for video data.

allOf:
  - $ref: /schemas/media/video-interface-devices.yaml#

properties:
  compatible:
    const: flir,boson-mipi

  reg:
    description: I2C device address
    maxItems: 1

  reset-gpios:
    description: Reference to the GPIO connected to the camera reset pin.
    maxItems: 1

  port:
    $ref: /schemas/graph.yaml#/properties/port
    description: |
      Video output port. Should contain one endpoint sub-node used to
      model connection to the video capture controller.

    properties:
      endpoint:
        $ref: /schemas/media/video-interfaces.yaml#
        unevaluatedProperties: false

        properties:
          data-lanes:
            description: |
              MIPI CSI-2 data lanes. The Boson+ supports 1 or 2 data lanes.
            oneOf:
              - items:
                  - const: 1
              - items:
                  - const: 1
                  - const: 2

          clock-lanes:
            description: MIPI CSI-2 clock lane
            const: 0

          clock-noncontinuous:
            description: |
              MIPI CSI-2 clock mode. The Boson+ supports both continuous
              and non-continuous clock modes.
            type: boolean

        required:
          - data-lanes
          - clock-lanes

required:
  - compatible
  - reg
  - port

additionalProperties: false

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>

    i2c {
        #address-cells = <1>;
        #size-cells = <0>;

        flir_boson: camera@6a {
            compatible = "flir,boson-mipi";
            reg = <0x6a>;
            reset-gpios = <&gpio1 5 GPIO_ACTIVE_LOW>;

            port {
                flir_boson_ep: endpoint {
                    remote-endpoint = <&csi2_ep>;
                    data-lanes = <1 2>;
                    clock-lanes = <0>;
                    clock-noncontinuous;
                };
            };
        };
    };

  - |
    #include <dt-bindings/gpio/gpio.h>

    i2c {
        #address-cells = <1>;
        #size-cells = <0>;

        flir_boson_single_lane: camera@6a {
            compatible = "flir,boson-mipi";
            reg = <0x6a>;

            port {
                flir_boson_single_ep: endpoint {
                    remote-endpoint = <&csi2_single_ep>;
                    data-lanes = <1>;
                    clock-lanes = <0>;
                };
            };
        };
    };